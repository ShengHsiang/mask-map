(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c365f2d0"],{"4de4":function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").filter,r=s("1dde");a({target:"Array",proto:!0,forced:!r("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").find,r=s("44d2"),n="find",c=!0;n in[]&&Array(1)[n]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(n)},"7efb":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"map-wrap"},[s("div",{staticClass:"map-container",attrs:{id:"map-container"}}),s("div",{staticClass:"map-toolbox"},[s("div",{staticClass:"map-toolbox-select_wrap"},[s("el-select",{staticClass:"map-toolbox-select",attrs:{placeholder:"請選擇"},on:{change:t.handleCityChange},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityData,(function(t){return s("el-option",{key:t.name,attrs:{value:t.name}})})),1),s("el-select",{staticClass:"map-toolbox-select",attrs:{placeholder:"請選擇"},model:{value:t.districts,callback:function(e){t.districts=e},expression:"districts"}},t._l(t.findDistrictsByCity,(function(t){return s("el-option",{key:t,attrs:{value:t}})})),1),s("div",{staticClass:"map-toolbox-text"},[s("span",[t._v("有取得口罩數量的藥局有")]),s("span",{staticClass:"count"},[t._v(t._s(t.storeList&&t.storeList.length||0))]),t._v("家 ")])],1),s("div",{staticClass:"map-toolbox-store_wrap"},t._l(t.storeList,(function(e,a){return s("div",{key:a,staticClass:"map-toolbox-store_item",on:{click:function(s){return t.handleStoreClick(e)}}},[s("div",{staticClass:"title"},[t._v(t._s(e.properties.name))]),s("div",{staticClass:"address"},[t._v(t._s(e.properties.address))]),s("div",{staticClass:"phone"},[t._v(t._s(e.properties.phone))]),s("div",{staticClass:"count_wrap"},[s("div",{staticClass:"item",class:{gray:0===e.properties.mask_adult}},[t._v("成人："+t._s(e.properties.mask_adult))]),s("div",{staticClass:"item",class:{gray:0===e.properties.mask_child}},[t._v("兒童："+t._s(e.properties.mask_child))])])])})),0)])])},i=[],r=(s("99af"),s("4de4"),s("7db0"),s("4160"),s("c975"),s("d81d"),s("fb6a"),s("b0c0"),s("159b"),s("96cf"),s("89ba")),n=s("bc3a"),c=s.n(n),o=s("f6c4"),d={name:"maskMap",data:function(){return{map:null,OSMUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maskData:null,cityData:o["a"],city:o["a"][0].name,districts:o["a"][0].districts[0],storeList:null}},computed:{findDistrictsByCity:function(){var t=this;return this.cityData.find((function(e){return e.name===t.city})).districts}},watch:{districts:function(t,e){t!==e&&this.filterData()}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.title="台灣口罩地圖",this.getScreenHeight(),e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"}),this.map=this.$map.createMap("map-container",{maxZoom:18}),this.$map.createTileLayer(this.map,this.OSMUrl,{}),this.map.setView([25,121.74739],10),t.prev=6,t.next=9,this.fetchData();case 9:return t.next=11,this.setMaskMakers(this.maskData);case 11:return s=t.sent,this.map.addLayer(s),t.next=15,this.filterData();case 15:e.close(),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](6),e.close();case 21:case"end":return t.stop()}}),t,this,[[6,18]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{handleCityChange:function(){var t=this;this.districts=this.cityData.find((function(e){return e.name===t.city})).districts[0]},handleStoreClick:function(t){var e=[t.geometry.coordinates[1],t.geometry.coordinates[0]];this.map.flyTo(e,18);var s=this.$map.createPopup({maxWidth:350,minWidth:250,className:"map-popup"});s.setLatLng(e).setContent(this.setPopupContent(t)),this.map.openPopup(s)},fetchData:function(){var t=this,e="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json?fbclid=IwAR08mKKy05bPBaRJfMU33fhIsj-4y8G2ec9vteF2eLXBzF9z3SPuIZHeQks";return c.a.get(e).then((function(e){200===e.status&&e.data.hasOwnProperty("features")&&(t.maskData=e.data.features,console.log(e.data))}))},filterData:function(){var t=this.city+this.districts,e=this.maskData.filter((function(e){if("台"===e.properties.address.charAt(0)){var s=e.properties.address.slice(1);e.properties.address="臺".concat(s)}return-1!=e.properties.address.indexOf(t)&&(e.properties.mask_adult>0||e.properties.mask_child>0)}));this.storeList=e},setMaskMakers:function(t){var e=this,s=this.$map.createMakerCluster();return t.forEach((function(t){var a=e.$map.createMakerByXY(t.geometry.coordinates),i=e.$map.createPopup({maxWidth:350,minWidth:250,className:"map-popup"});i.setContent(e.setPopupContent(t)),a.bindPopup(i),s.addLayer(a)})),s},setPopupContent:function(t){var e='<div class="item">成人口罩：'.concat(t.properties.mask_adult," 個</div>"),s='<div class="item">兒童口罩：'.concat(t.properties.mask_child," 個</div>");0===t.properties.mask_adult?e='<div class="item gray">成人口罩：'.concat(t.properties.mask_adult," 個</div>"):t.properties.mask_child>0&&(s='<div class="item gray">兒童口罩：'.concat(t.properties.mask_child," 個</div>"));var a=t.properties.address+"+"+t.properties.name;return"<h1>".concat(t.properties.name,'</h1>\n          <div class="row">電話：').concat(t.properties.phone,'</div>\n          <div class="row">\n            地址：\n            <a target="_blank" href="https://www.google.com.tw/maps/place/').concat(a,'">').concat(t.properties.address,'</a>\n          </div>\n          <div class="count_wrap row">\n            ').concat(e).concat(s,'\n          </div>\n          <div class="row">更新時間：').concat(t.properties.updated||"未知","</div>")},getScreenHeight:function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px")),window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}))}}},p=d,l=(s("c9ac"),s("2877")),m=Object(l["a"])(p,a,i,!1,null,null,null);e["default"]=m.exports},"93a4":function(t,e,s){},c9ac:function(t,e,s){"use strict";var a=s("93a4"),i=s.n(a);i.a},f6c4:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var a=[{name:"臺北市",districts:["中正區","大同區","中山區","萬華區","信義區","松山區","大安區","南港區","北投區","內湖區","士林區","文山區"]},{name:"新北市",districts:["板橋區","新莊區","泰山區","林口區","淡水區","金山區","八里區","萬里區","石門區","三芝區","瑞芳區","汐止區","平溪區","貢寮區","雙溪區","深坑區","石碇區","新店區","坪林區","烏來區","中和區","永和區","土城區","三峽區","樹林區","鶯歌區","三重區","蘆洲區","五股區"]},{name:"基隆市",districts:["仁愛區","中正區","信義區","中山區","安樂區","暖暖區","七堵區"]},{name:"桃園市",districts:["桃園區","中壢區","平鎮區","八德區","楊梅區","蘆竹區","龜山區","龍潭區","大溪區","大園區","觀音區","新屋區","復興區"]},{name:"新竹縣",districts:["竹北市","竹東鎮","新埔鎮","關西鎮","峨眉鄉","寶山鄉","北埔鄉","橫山鄉","芎林鄉","湖口鄉","新豐鄉","尖石鄉","五峰鄉"]},{name:"新竹市",districts:["東區","北區","香山區"]},{name:"苗栗縣",districts:["苗栗市","通霄鎮","苑裡鎮","竹南鎮","頭份鎮","後龍鎮","卓蘭鎮","西湖鄉","頭屋鄉","公館鄉","銅鑼鄉","三義鄉","造橋鄉","三灣鄉","南庄鄉","大湖鄉","獅潭鄉","泰安鄉"]},{name:"臺中市",districts:["中區","東區","南區","西區","北區","北屯區","西屯區","南屯區","太平區","大里區","霧峰區","烏日區","豐原區","后里區","東勢區","石岡區","新社區","和平區","神岡區","潭子區","大雅區","大肚區","龍井區","沙鹿區","梧棲區","清水區","大甲區","外埔區","大安區"]},{name:"南投縣",districts:["南投市","埔里鎮","草屯鎮","竹山鎮","集集鎮","名間鄉","鹿谷鄉","中寮鄉","魚池鄉","國姓鄉","水里鄉","信義鄉","仁愛鄉"]},{name:"彰化縣",districts:["彰化市","員林鎮","和美鎮","鹿港鎮","溪湖鎮","二林鎮","田中鎮","北斗鎮","花壇鄉","芬園鄉","大村鄉","永靖鄉","伸港鄉","線西鄉","福興鄉","秀水鄉","埔心鄉","埔鹽鄉","大城鄉","芳苑鄉","竹塘鄉","社頭鄉","二水鄉","田尾鄉","埤頭鄉","溪州鄉"]},{name:"雲林縣",districts:["斗六市","斗南鎮","虎尾鎮","西螺鎮","土庫鎮","北港鎮","莿桐鄉","林內鄉","古坑鄉","大埤鄉","崙背鄉","二崙鄉","麥寮鄉","臺西鄉","東勢鄉","褒忠鄉","四湖鄉","口湖鄉","水林鄉","元長鄉"]},{name:"嘉義縣",districts:["太保市","朴子市","布袋鎮","大林鎮","民雄鄉","溪口鄉","新港鄉","六腳鄉","東石鄉","義竹鄉","鹿草鄉","水上鄉","中埔鄉","竹崎鄉","梅山鄉","番路鄉","大埔鄉","阿里山鄉"]},{name:"嘉義市",districts:["東區","西區"]},{name:"臺南市",districts:["中西區","東區","南區","北區","安平區","安南區","永康區","歸仁區","新化區","左鎮區","玉井區","楠西區","南化區","仁德區","關廟區","龍崎區","官田區","麻豆區","佳里區","西港區","七股區","將軍區","學甲區","北門區","新營區","後壁區","白河區","東山區","六甲區","下營區","柳營區","鹽水區","善化區","大內區","山上區","新市區","安定區"]},{name:"高雄市",districts:["楠梓區","左營區","鼓山區","三民區","鹽埕區","前金區","新興區","苓雅區","前鎮區","小港區","旗津區","鳳山區","大寮區","鳥松區","林園區","仁武區","大樹區","大社區","岡山區","路竹區","橋頭區","梓官區","彌陀區","永安區","燕巢區","田寮區","阿蓮區","茄萣區","湖內區","旗山區","美濃區","內門區","杉林區","甲仙區","六龜區","茂林區","桃源區","那瑪夏區"]},{name:"屏東縣",districts:["屏東市","潮州鎮","東港鎮","恆春鎮","萬丹鄉","長治鄉","麟洛鄉","九如鄉","里港鄉","鹽埔鄉","高樹鄉","萬巒鄉","內埔鄉","竹田鄉","新埤鄉","枋寮鄉","新園鄉","崁頂鄉","林邊鄉","南州鄉","佳冬鄉","琉球鄉","車城鄉","滿州鄉","枋山鄉","霧台鄉","瑪家鄉","泰武鄉","來義鄉","春日鄉","獅子鄉","牡丹鄉","三地門鄉"]},{name:"宜蘭縣",districts:["宜蘭市","羅東鎮","蘇澳鎮","頭城鎮","礁溪鄉","壯圍鄉","員山鄉","冬山鄉","五結鄉","三星鄉","大同鄉","南澳鄉"]},{name:"花蓮縣",districts:["花蓮市","鳳林鎮","玉里鎮","新城鄉","吉安鄉","壽豐鄉","秀林鄉","光復鄉","豐濱鄉","瑞穗鄉","萬榮鄉","富里鄉","卓溪鄉"]},{name:"臺東縣",districts:["臺東市","成功鎮","關山鎮","長濱鄉","海端鄉","池上鄉","東河鄉","鹿野鄉","延平鄉","卑南鄉","金峰鄉","大武鄉","達仁鄉","綠島鄉","蘭嶼鄉","太麻里鄉"]},{name:"澎湖縣",districts:["馬公市","湖西鄉","白沙鄉","西嶼鄉","望安鄉","七美鄉"]},{name:"金門縣",districts:["金城鎮","金湖鎮","金沙鎮","金寧鄉","烈嶼鄉","烏坵鄉"]},{name:"連江縣",districts:["南竿鄉","北竿鄉","莒光鄉","東引鄉"]}]}}]);
//# sourceMappingURL=chunk-c365f2d0.cdad07e3.js.map