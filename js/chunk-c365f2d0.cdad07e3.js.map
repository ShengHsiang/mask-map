{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/maskMap/pages/Map.vue?c18b","webpack:///src/maskMap/pages/Map.vue","webpack:///./src/maskMap/pages/Map.vue?0649","webpack:///./src/maskMap/pages/Map.vue","webpack:///./src/maskMap/pages/Map.vue?fc05","webpack:///./src/maskMap/js/data.js"],"names":["$","$filter","filter","arrayMethodHasSpeciesSupport","target","proto","forced","callbackfn","this","arguments","length","undefined","$find","find","addToUnscopables","FIND","SKIPS_HOLES","Array","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","handleCityChange","model","value","callback","$$v","city","expression","_l","item","key","name","districts","_v","_s","storeList","index","$event","handleStoreClick","properties","address","phone","class","mask_adult","mask_child","staticRenderFns","data","map","OSMUrl","maskData","cityData","computed","findDistrictsByCity","watch","newValue","oldValue","filterData","methods","flyTo","temp","maxWidth","minWidth","className","popup","setLatLng","setContent","setPopupContent","openPopup","fetchData","res","status","hasOwnProperty","console","log","charAt","concat","newAddress","storeData","setMaskMakers","forEach","marker","bindPopup","cluster","addLayer","element","adultStr","childStr","getScreenHeight","document","documentElement","style","setProperty","window","addEventListener","component"],"mappings":"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","file":"js/chunk-c365f2d0.cdad07e3.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !arrayMethodHasSpeciesSupport('filter') }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-wrap\"},[_c('div',{staticClass:\"map-container\",attrs:{\"id\":\"map-container\"}}),_c('div',{staticClass:\"map-toolbox\"},[_c('div',{staticClass:\"map-toolbox-select_wrap\"},[_c('el-select',{staticClass:\"map-toolbox-select\",attrs:{\"placeholder\":\"請選擇\"},on:{\"change\":_vm.handleCityChange},model:{value:(_vm.city),callback:function ($$v) {_vm.city=$$v},expression:\"city\"}},_vm._l((_vm.cityData),function(item){return _c('el-option',{key:item.name,attrs:{\"value\":item.name}})}),1),_c('el-select',{staticClass:\"map-toolbox-select\",attrs:{\"placeholder\":\"請選擇\"},model:{value:(_vm.districts),callback:function ($$v) {_vm.districts=$$v},expression:\"districts\"}},_vm._l((_vm.findDistrictsByCity),function(item){return _c('el-option',{key:item,attrs:{\"value\":item}})}),1),_c('div',{staticClass:\"map-toolbox-text\"},[_c('span',[_vm._v(\"有取得口罩數量的藥局有\")]),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(_vm.storeList && _vm.storeList.length || 0))]),_vm._v(\"家 \")])],1),_c('div',{staticClass:\"map-toolbox-store_wrap\"},_vm._l((_vm.storeList),function(item,index){return _c('div',{key:index,staticClass:\"map-toolbox-store_item\",on:{\"click\":function($event){return _vm.handleStoreClick(item)}}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.properties.name))]),_c('div',{staticClass:\"address\"},[_vm._v(_vm._s(item.properties.address))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.properties.phone))]),_c('div',{staticClass:\"count_wrap\"},[_c('div',{staticClass:\"item\",class:{'gray': item.properties.mask_adult === 0}},[_vm._v(\"成人：\"+_vm._s(item.properties.mask_adult))]),_c('div',{staticClass:\"item\",class:{'gray': item.properties.mask_child === 0}},[_vm._v(\"兒童：\"+_vm._s(item.properties.mask_child))])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"map-wrap\">\n    <div class=\"map-container\" id=\"map-container\"></div>\n    <div class=\"map-toolbox\">\n      <div class=\"map-toolbox-select_wrap\">\n        <el-select\n          class=\"map-toolbox-select\"\n          v-model=\"city\"\n          placeholder=\"請選擇\"\n          @change=\"handleCityChange\"\n        >\n          <el-option v-for=\"item in cityData\" :key=\"item.name\" :value=\"item.name\"></el-option>\n        </el-select>\n        <el-select class=\"map-toolbox-select\" v-model=\"districts\" placeholder=\"請選擇\">\n          <el-option v-for=\"item in findDistrictsByCity\" :key=\"item\" :value=\"item\"></el-option>\n        </el-select>\n        <div class=\"map-toolbox-text\">\n          <span>有取得口罩數量的藥局有</span>\n          <span class=\"count\">{{ storeList && storeList.length || 0 }}</span>家\n        </div>\n      </div>\n      <div class=\"map-toolbox-store_wrap\">\n        <div\n          class=\"map-toolbox-store_item\"\n          v-for=\"(item, index) in storeList\"\n          :key=\"index\"\n          @click=\"handleStoreClick(item)\"\n        >\n          <div class=\"title\">{{ item.properties.name }}</div>\n          <div class=\"address\">{{ item.properties.address }}</div>\n          <div class=\"phone\">{{ item.properties.phone }}</div>\n          <div class=\"count_wrap\">\n            <div\n              class=\"item\"\n              :class=\"{'gray': item.properties.mask_adult === 0}\"\n            >成人：{{ item.properties.mask_adult }}</div>\n            <div\n              class=\"item\"\n              :class=\"{'gray': item.properties.mask_child === 0}\"\n            >兒童：{{ item.properties.mask_child }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { cityData } from \"../js/data\";\n\nexport default {\n  name: \"maskMap\",\n  data() {\n    return {\n      map: null,\n      OSMUrl: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      maskData: null,\n      cityData: cityData,\n      city: cityData[0].name,\n      districts: cityData[0].districts[0],\n      storeList: null\n    };\n  },\n  computed: {\n    findDistrictsByCity() {\n      return this.cityData.find(item => item.name === this.city).districts;\n    }\n  },\n  watch: {\n    districts(newValue, oldValue) {\n      if (newValue !== oldValue) {\n        this.filterData();\n      }\n    }\n  },\n  async mounted() {\n    document.title = '台灣口罩地圖'\n    // 獲取裝置螢幕高度\n    this.getScreenHeight();\n    // 加載中效果\n    const loading = this.$loading({\n      lock: true,\n      text: \"Loading\",\n      spinner: \"el-icon-loading\",\n      background: \"rgba(0, 0, 0, 0.8)\"\n    });\n    // 初使化 map\n    this.map = this.$map.createMap(\"map-container\", {\n      maxZoom: 18\n    });\n    // 加載 open street map 的圖層服務\n    this.$map.createTileLayer(this.map, this.OSMUrl, {});\n    // 設定地圖的中心位置\n    this.map.setView([25, 121.74739], 10);\n\n    // 獲取口罩數據\n    try {\n      // 獲取資料\n      await this.fetchData();\n      // 在地圖上定位\n      const cluster = await this.setMaskMakers(this.maskData);\n      this.map.addLayer(cluster);\n      // 篩選符合縣市區的藥局\n      await this.filterData();\n      loading.close();\n    } catch {\n      loading.close();\n    }\n  },\n  methods: {\n    // 選擇縣市，自動選擇第一個區域資料\n    handleCityChange() {\n      this.districts = this.cityData.find(\n        item => item.name === this.city\n      ).districts[0];\n    },\n    // 點擊藥局的事件 -> 跳轉到地圖所在的點\n    handleStoreClick(item) {\n      const temp = [item.geometry.coordinates[1], item.geometry.coordinates[0]];\n      this.map.flyTo(temp, 18);\n      let popup = this.$map.createPopup({\n        maxWidth: 350,\n        minWidth: 250,\n        className: \"map-popup\"\n      });\n      popup.setLatLng(temp).setContent(this.setPopupContent(item));\n      this.map.openPopup(popup);\n    },\n    // 調用接口獲取藥局資料\n    fetchData() {\n      const url =\n        \"https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json?fbclid=IwAR08mKKy05bPBaRJfMU33fhIsj-4y8G2ec9vteF2eLXBzF9z3SPuIZHeQks\";\n      return axios.get(url).then(res => {\n        if (res.status === 200) {\n          if (res.data.hasOwnProperty(\"features\")) {\n            this.maskData = res.data.features;\n            console.log(res.data)\n          }\n        }\n      });\n    },\n    // 篩選符合縣市區的藥局\n    filterData() {\n      const condition = this.city + this.districts;\n      const storeData = this.maskData.filter(item => {\n        if (item.properties.address.charAt(0) === \"台\") {\n          const newAddress = item.properties.address.slice(1);\n          item.properties.address = \"臺\".concat(newAddress);\n        }\n        return (\n          item.properties.address.indexOf(condition) != -1 &&\n          (item.properties.mask_adult > 0 || item.properties.mask_child > 0)\n        );\n      });\n      this.storeList = storeData;\n    },\n    // 在地圖上定位\n    setMaskMakers(data) {\n      const cluster = this.$map.createMakerCluster();\n      data.forEach(element => {\n        const marker = this.$map.createMakerByXY(element.geometry.coordinates);\n        // 1. 創建 popup\n        let popup = this.$map.createPopup({\n          maxWidth: 350,\n          minWidth: 250,\n          className: \"map-popup\"\n        });\n        // 2. 寫入內容\n        popup.setContent(this.setPopupContent(element));\n        // 3.为 marker 绑定 popup\n        marker.bindPopup(popup);\n        cluster.addLayer(marker);\n      });\n      return cluster;\n    },\n    // popup 圖層的樣式\n    setPopupContent(element) {\n      let adultStr = `<div class=\"item\">成人口罩：${element.properties.mask_adult} 個</div>`;\n      let childStr = `<div class=\"item\">兒童口罩：${element.properties.mask_child} 個</div>`;\n      if (element.properties.mask_adult === 0) {\n        adultStr = `<div class=\"item gray\">成人口罩：${element.properties.mask_adult} 個</div>`;\n      } else if (element.properties.mask_child > 0) {\n        childStr = `<div class=\"item gray\">兒童口罩：${element.properties.mask_child} 個</div>`;\n      }\n      const search = element.properties.address + \"+\" + element.properties.name;\n      return `<h1>${element.properties.name}</h1>\n          <div class=\"row\">電話：${element.properties.phone}</div>\n          <div class=\"row\">\n            地址：\n            <a target=\"_blank\" href=\"https://www.google.com.tw/maps/place/${search}\">${\n        element.properties.address\n      }</a>\n          </div>\n          <div class=\"count_wrap row\">\n            ${adultStr}${childStr}\n          </div>\n          <div class=\"row\">更新時間：${element.properties.updated ||\n            \"未知\"}</div>`;\n    },\n    // 設置 螢幕高度 vh 使其在手機版網頁也能正確響應\n    getScreenHeight() {\n      // First we get the viewport height and we multiple it by 1% to get a value for a vh unit\n      let vh = window.innerHeight * 0.01;\n      // Then we set the value in the --vh custom property to the root of the document\n      document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n\n      // We listen to the resize event\n      window.addEventListener(\"resize\", () => {\n        // We execute the same script as before\n        let vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.map-wrap {\n  @include pc-width {\n    display: flex;\n    justify-content: flex-end;\n  }\n  @include phone-width {\n    height: 100vh; /* Fallback for browsers that do not support Custom Properties */\n    height: calc(var(--vh, 1vh) * 100 - 46px);\n  }\n}\n.map-container {\n  @include pc-width {\n    width: calc(100vw - 300px);\n    height: 100vh;\n  }\n  @include phone-width {\n    height: calc((var(--vh, 1vh) * 100) / 2);\n  }\n}\n.map-toolbox {\n  background-color: #f6f6f6;\n  @include pc-width {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 300px;\n    box-shadow: 0 2px 4px #10203033, 0 0 6px #10203033;\n  }\n  @include phone-width {\n    height: calc((var(--vh, 1vh) * 100) / 2);\n  }\n\n  .map-toolbox-select_wrap {\n    @include pc-width {\n      padding: 20px;\n      height: 150px;\n    }\n    @include phone-width {\n      padding: 10px 10px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      flex-wrap: wrap;\n      height: 80px;\n    }\n  }\n\n  .map-toolbox-select {\n    @include pc-width {\n      width: 100%;\n      margin-bottom: 10px;\n    }\n    @include phone-width {\n      width: 49%;\n      margin-bottom: 5px;\n    }\n  }\n\n  .map-toolbox-store_wrap {\n    overflow-x: hidden;\n    overflow-y: scroll;\n    @include pc-width {\n      height: calc(100vh - 150px);\n    }\n    @include phone-width {\n      height: calc(100% - 80px);\n    }\n  }\n\n  .map-toolbox-store_item {\n    min-height: 150px;\n    background-color: #fff;\n    padding: 20px;\n    border-bottom: 1px solid #e2e2e2;\n    cursor: pointer;\n    &:first-child {\n      border-top: 1px solid #e2e2e2;\n    }\n    &:hover {\n      background-color: #f6f6f6;\n    }\n    .title {\n      margin-bottom: 10px;\n    }\n    .address,\n    .phone {\n      color: #888888;\n      font-size: 14px;\n      margin-bottom: 5px;\n    }\n  }\n  .map-toolbox-text {\n    .count {\n      color: $--color-primary;\n      font-size: 22px;\n      font-weight: bold;\n      margin: 0 5px;\n    }\n  }\n}\n.map-popup {\n  h1 {\n    margin-bottom: 10px;\n  }\n  .row {\n    margin-bottom: 5px;\n  }\n}\n.count_wrap {\n  display: flex;\n  border-radius: 6px;\n  overflow: hidden;\n  .item {\n    width: 50%;\n    height: 35px;\n    background-color: #668afe;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: #fff;\n    &:last-child {\n      border-left: 1px solid #fff;\n    }\n  }\n  .gray {\n    background-color: #e2e2e2;\n    color: #9c9c9c;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=2aafae36&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","export const cityData = [\n  {\n    name: '臺北市',\n    districts: [\n      '中正區', '大同區', '中山區', '萬華區', '信義區', '松山區', '大安區', '南港區', '北投區', '內湖區', '士林區', '文山區'\n    ],\n  },\n  {\n    name: '新北市',\n    districts: [\n      '板橋區', '新莊區', '泰山區', '林口區', '淡水區', '金山區', '八里區', '萬里區', '石門區', '三芝區', '瑞芳區', '汐止區', '平溪區', '貢寮區', '雙溪區', '深坑區', '石碇區', '新店區', '坪林區', '烏來區', '中和區', '永和區', '土城區', '三峽區', '樹林區', '鶯歌區', '三重區', '蘆洲區', '五股區'\n    ],\n  },\n  {\n    name: '基隆市',\n    districts: [\n      '仁愛區', '中正區', '信義區', '中山區', '安樂區', '暖暖區', '七堵區'\n    ]\n  },\n  {\n    name: '桃園市',\n    districts: [\n      '桃園區', '中壢區', '平鎮區', '八德區', '楊梅區', '蘆竹區', '龜山區', '龍潭區', '大溪區', '大園區', '觀音區', '新屋區', '復興區'\n    ]\n  },\n  {\n    name: '新竹縣',\n    districts: [\n      '竹北市', '竹東鎮', '新埔鎮', '關西鎮', '峨眉鄉', '寶山鄉', '北埔鄉', '橫山鄉', '芎林鄉', '湖口鄉', '新豐鄉', '尖石鄉', '五峰鄉'\n    ]\n  },\n  {\n    name: '新竹市',\n    districts: [\n      '東區', '北區', '香山區'\n    ]\n  },\n  {\n    name: '苗栗縣',\n    districts: [\n      '苗栗市', '通霄鎮', '苑裡鎮', '竹南鎮', '頭份鎮', '後龍鎮', '卓蘭鎮', '西湖鄉', '頭屋鄉', '公館鄉', '銅鑼鄉', '三義鄉', '造橋鄉', '三灣鄉', '南庄鄉', '大湖鄉', '獅潭鄉', '泰安鄉'\n    ]\n  },\n  {\n    name: '臺中市',\n    districts: [\n      '中區', '東區', '南區', '西區', '北區', '北屯區', '西屯區', '南屯區', '太平區', '大里區', '霧峰區', '烏日區', '豐原區', '后里區', '東勢區', '石岡區', '新社區', '和平區', '神岡區', '潭子區', '大雅區', '大肚區', '龍井區', '沙鹿區', '梧棲區', '清水區', '大甲區', '外埔區', '大安區'\n    ]\n  },\n  {\n    name: '南投縣',\n    districts: [\n      '南投市', '埔里鎮', '草屯鎮', '竹山鎮', '集集鎮', '名間鄉', '鹿谷鄉', '中寮鄉', '魚池鄉', '國姓鄉', '水里鄉', '信義鄉', '仁愛鄉'\n    ]\n  },\n  {\n    name: '彰化縣',\n    districts: [\n      '彰化市', '員林鎮', '和美鎮', '鹿港鎮', '溪湖鎮', '二林鎮', '田中鎮', '北斗鎮', '花壇鄉', '芬園鄉', '大村鄉', '永靖鄉', '伸港鄉', '線西鄉', '福興鄉', '秀水鄉', '埔心鄉', '埔鹽鄉', '大城鄉', '芳苑鄉', '竹塘鄉', '社頭鄉', '二水鄉', '田尾鄉', '埤頭鄉', '溪州鄉'\n    ]\n  },\n  {\n    name: '雲林縣',\n    districts: [\n      '斗六市', '斗南鎮', '虎尾鎮', '西螺鎮', '土庫鎮', '北港鎮', '莿桐鄉', '林內鄉', '古坑鄉', '大埤鄉', '崙背鄉', '二崙鄉', '麥寮鄉', '臺西鄉', '東勢鄉', '褒忠鄉', '四湖鄉', '口湖鄉', '水林鄉', '元長鄉'\n    ]\n  },\n  {\n    name: '嘉義縣',\n    districts: [\n      '太保市', '朴子市', '布袋鎮', '大林鎮', '民雄鄉', '溪口鄉', '新港鄉', '六腳鄉', '東石鄉', '義竹鄉', '鹿草鄉', '水上鄉', '中埔鄉', '竹崎鄉', '梅山鄉', '番路鄉', '大埔鄉', '阿里山鄉'\n    ]\n  },\n  {\n    name: '嘉義市',\n    districts: [\n      '東區', '西區'\n    ]\n  },\n  {\n    name: '臺南市',\n    districts: [\n      '中西區', '東區', '南區', '北區', '安平區', '安南區', '永康區', '歸仁區', '新化區', '左鎮區', '玉井區', '楠西區', '南化區', '仁德區', '關廟區', '龍崎區', '官田區', '麻豆區', '佳里區', '西港區', '七股區', '將軍區', '學甲區', '北門區', '新營區', '後壁區', '白河區', '東山區', '六甲區', '下營區', '柳營區', '鹽水區', '善化區', '大內區', '山上區', '新市區', '安定區'\n    ]\n  },\n  {\n    name: '高雄市',\n    districts: [\n      '楠梓區', '左營區', '鼓山區', '三民區', '鹽埕區', '前金區', '新興區', '苓雅區', '前鎮區', '小港區', '旗津區', '鳳山區', '大寮區', '鳥松區', '林園區', '仁武區', '大樹區', '大社區', '岡山區', '路竹區', '橋頭區', '梓官區', '彌陀區', '永安區', '燕巢區', '田寮區', '阿蓮區', '茄萣區', '湖內區', '旗山區', '美濃區', '內門區', '杉林區', '甲仙區', '六龜區', '茂林區', '桃源區', '那瑪夏區'\n    ]\n  },\n  {\n    name: '屏東縣',\n    districts: [\n      '屏東市', '潮州鎮', '東港鎮', '恆春鎮', '萬丹鄉', '長治鄉', '麟洛鄉', '九如鄉', '里港鄉', '鹽埔鄉', '高樹鄉', '萬巒鄉', '內埔鄉', '竹田鄉', '新埤鄉', '枋寮鄉', '新園鄉', '崁頂鄉', '林邊鄉', '南州鄉', '佳冬鄉', '琉球鄉', '車城鄉', '滿州鄉', '枋山鄉', '霧台鄉', '瑪家鄉', '泰武鄉', '來義鄉', '春日鄉', '獅子鄉', '牡丹鄉', '三地門鄉'\n    ]\n  },\n  {\n    name: '宜蘭縣',\n    districts: [\n      '宜蘭市', '羅東鎮', '蘇澳鎮', '頭城鎮', '礁溪鄉', '壯圍鄉', '員山鄉', '冬山鄉', '五結鄉', '三星鄉', '大同鄉', '南澳鄉'\n    ]\n  },\n  {\n    name: '花蓮縣',\n    districts: [\n      '花蓮市', '鳳林鎮', '玉里鎮', '新城鄉', '吉安鄉', '壽豐鄉', '秀林鄉', '光復鄉', '豐濱鄉', '瑞穗鄉', '萬榮鄉', '富里鄉', '卓溪鄉'\n    ]\n  },\n  {\n    name: '臺東縣',\n    districts: [\n      '臺東市', '成功鎮', '關山鎮', '長濱鄉', '海端鄉', '池上鄉', '東河鄉', '鹿野鄉', '延平鄉', '卑南鄉', '金峰鄉', '大武鄉', '達仁鄉', '綠島鄉', '蘭嶼鄉', '太麻里鄉'\n    ]\n  },\n  {\n    name: '澎湖縣',\n    districts: [\n      '馬公市', '湖西鄉', '白沙鄉', '西嶼鄉', '望安鄉', '七美鄉'\n    ]\n  },\n  {\n    name: '金門縣',\n    districts: [\n      '金城鎮', '金湖鎮', '金沙鎮', '金寧鄉', '烈嶼鄉', '烏坵鄉'\n    ]\n  },\n  {\n    name: '連江縣',\n    districts: [\n      '南竿鄉', '北竿鄉', '莒光鄉', '東引鄉'\n    ]\n  }\n]"],"sourceRoot":""}